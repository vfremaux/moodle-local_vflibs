define(["jquery","core/log"],function(a,b){var c={captured:null,selectedoptions:[],init:function(c){a(".orderedselect-delete").bind("click",this.removeselecteditem),a(".orderedselect-select").bind("change",this.updatevalues),a(".orderedselect-option").bind("mousedown",this.captureselecteditem),a(".orderedselect-option").bind("mousedrag",this.drag),a(".orderedselect-option").bind("mouseup",this.releaseselecteditem),this.selectedoptions=c.options,b.debug("AMD orderedselect initialized")},toggleoption:function(){var b=a(this),d=b.nearest("select"),e="#"+d.attr("id")+"-value",f="#"+d.attr("id")+"-selection";if(iselected)$newnode=a(f).appendNode(),selectedoptions[b.attr("value")]=newnode,a(e).html(c.selectedoptions.join(","));else{removedoptions=new Array;for(opt in selectedoptions)opt!=b.attr("value")&&(removedoptions[opt]=selectedoptions[opt]);a(e).html(c.removedoptions.join(","));var g=d.attr("id")+"-"+b.attr("value");a(f).deleteNode(g)}},captureselecteditem:function(b){b.preventDefault(),b.stopPropagation();var d=a(this);c.captured=d,d.css("position","absolute"),d.css("opacity",.5)},dragselecteditem:function(b){b.preventDefault(),b.stopPropagation();var d=a(this);d.attr("id")===c.captured&&""!==c.captured},releaseselecteditem:function(b){b.preventDefault(),b.stopPropagation();var d=a(this);c.captured=null,d.css("position",""),d.css("opacity",1)},removeselecteditem:function(){var b=a(this);b.nearest("orderedselect-option")}};return c});